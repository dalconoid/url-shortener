# balance-service
***
### Ручки:
+ Проверка работоспособности сервиса:  
  Request: **[GET] /alive**

Response:
<pre>
200
</pre>

+ Регистрация URL:  
  Request: **[POST] /register-url**  
  Body:
  - With autogenerated slug
    <pre>
    {
        "url": "https://www.google.com/"
    }
    </pre>
  - With custom slug
    <pre>
    {
        "url": "https://www.instagram.com/",
        "slug": "inst"
    }
    </pre>

Response:
<pre>
200
{
    {"slug":"nDOaxtf"}
}

400
slug [inst] already binded

400
Validation error(s):
Key: 'RegisterURLRequest.URL' Error:Field validation for 'URL' failed on the 'required' tag
</pre>

+ Редирект на сокращенный URL:  
  Request: **[POST] /{slug:[a-zA-Z0-9\-]{3,20}}**  

Response:
<pre>
303

404
slug [insta] not registered
</pre>

***

### Переменные конфига:

+ SERVER
    * PORT - порт на котором запускается сервер
+ DB
    * HOST - хост БД
    * USER - пользователь БД
    * PASSWORD - пароль БД
    * NAME - имя БД
    * PORT - порт БД
    * SSL - режим SSL БД

***

### Запуск:

Для запуска нужно создать PostgreSQL БД с табличками из *url_tables.sql*.
В примере ниже БД создается в Docker контейнере с именем pg_url
+ docker build . -t url_srv
+ docker run --link pg_url --rm -p 8085:8085 -d --name url_shortener url_srv url-shortener
+ docker kill url_shortener